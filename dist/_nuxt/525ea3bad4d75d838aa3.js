(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{350:function(t,e,r){"use strict";var n={name:"FormBreadcrumb",props:{currentPage:{type:String,default:""}}},a=r(10),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("\n    "+t._s(t.$t("admin"))+"\n  ")]),t._v(" "),r("el-breadcrumb-item",[t._v("\n    "+t._s(t.$t(t.currentPage))+"\n  ")])],1)},[],!1,null,null,null);o.options.__file="breadcrumb.vue";e.a=o.exports},356:function(t,e,r){"use strict";var n={name:"BrandForm",props:{frm:{type:Object,default:function(){return{location:{coordinates:[15.520638660195933,-88.02657544612886]}}}},loading:{type:Boolean,default:!1},handleMapClick:{type:Function,default:function(){return!1}},onSubmit:{type:Function,default:function(){return!1}},rules:{type:Object,default:function(){return{}}},supermarkets:{type:Array,default:function(){return[]}},update:{type:Function,default:function(){return!1}}},computed:{latlng:{get:function(){return{lat:this.frm.location.coordinates[0],lng:this.frm.location.coordinates[1]}},set:function(){}}},methods:{validate:function(t){return this.$refs.form.validate(t)}}},a=r(10),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-wrapper"},[r("el-form",{ref:"form",staticClass:"form-elements",attrs:{rules:t.rules,model:t.frm}},[r("el-form-item",{attrs:{label:"Supermercados",prop:"supermaket"}},[r("el-select",{staticStyle:{display:"block"},attrs:{filterable:"",value:t.frm.supermarket&&t.supermarkets.filter(function(e){return e.id==t.frm.supermarket})[0].name,prop:"supermarket"},on:{change:function(e){t.update("supermarket",e)}}},t._l(t.supermarkets,function(e){return r("el-option",{key:e.id,attrs:{value:e.id}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),1)],1),t._v(" "),r("el-form-item",[r("el-time-select",{attrs:{value:t.frm.opening,"picker-options":{start:"00:00",step:"00:30",end:"24:00"},placeholder:"Apertura"},on:{input:function(e){t.update("opening",e)}}}),t._v(" "),r("el-time-select",{attrs:{value:t.frm.closing,"picker-options":{start:"00:00",step:"00:30",end:"24:00"},placeholder:"Cierre"},on:{input:function(e){t.update("closing",e)}}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Numero de telefono",prop:"phone_number"}},[r("el-input",{attrs:{value:t.frm.phone_number},on:{input:function(e){t.update("phone_number",e)}}})],1),t._v(" "),r("el-form-item",[r("div",{staticStyle:{height:"400px"}},[r("no-ssr",[r("l-map",{staticStyle:{height:"100%"},attrs:{center:t.frm.location.coordinates,zoom:8},on:{click:t.handleMapClick}},[r("l-tile-layer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}}),t._v(" "),r("l-marker",{attrs:{"lat-lng":t.latlng},on:{"update:latLng":function(e){t.latlng=e}}})],1)],1)],1)]),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit}},[t._v("\n        "+t._s(t.$t("submit"))+"\n      ")])],1)],1)],1)},[],!1,null,null,null);o.options.__file="branch.vue";e.a=o.exports},368:function(t,e,r){"use strict";r.r(e);var n=r(4),a=r.n(n),o=(r(7),r(1)),i=r.n(o),s=r(350),u=r(356),l=r(25),c={components:{FormBreadcrumb:s.a,BranchForm:u.a},asyncData:function(){var t=i()(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.app,r=e.store,t.next=3,r.dispatch("supermarket/fetch");case 3:return t.abrupt("return",{supermarkets:r.state.supermarket.collection});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),data:function(){return{rules:{supermarket:{required:!0,message:this.$t("required")}}}},computed:a()({},Object(l.e)({state:function(t){return t.branch}})),methods:{handleMapClick:function(){var t=i()(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e.latlng.lat,"&lon=").concat(e.latlng.lng,"&zoom=18&addressdetails=1"),t.next=3,this.$axios.get(r);case 3:n=t.sent,a=n.data,this.$store.commit("branch/update",{field:"city",value:a.address.city}),this.$store.commit("branch/update",{field:"address",value:a.display_name}),this.$store.commit("branch/update",{field:"location",value:{type:"Point",coordinates:[e.latlng.lat,e.latlng.lng]}});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onSubmit:function(){var t=this;this.$refs.branchForm.validate(function(e){return!!e&&t.$store.dispatch("branch/submit")})},update:function(t,e){this.$store.commit("branch/update",{field:t,value:e})}}},m=r(10),p=Object(m.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-container"},[r("form-breadcrumb",{attrs:{"current-page":"branches"}}),t._v(" "),r("h3",{staticClass:"form-title"},[t._v("\n    "+t._s(t.$t("new"))+" "+t._s(t.$t("branch"))+"\n  ")]),t._v(" "),r("branch-form",{ref:"branchForm",attrs:{frm:t.state.frm,loading:t.state.loading,"handle-map-click":t.handleMapClick,supermarkets:t.supermarkets,"on-submit":t.onSubmit,rules:t.rules,update:t.update}})],1)},[],!1,null,null,null);p.options.__file="index.vue";e.default=p.exports}}]);